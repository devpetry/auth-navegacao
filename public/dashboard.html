<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <title>Área Restrita</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />

    <style>
        body {
            background-color: #f8f9fa;
        }

        .dashboard-container {
            max-width: 600px;
            margin: 80px auto;
            padding: 30px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        #sugestao {
            position: absolute;
            top: 20px;
            right: 20px;
            max-width: 250px;
            background: #e2f0ff;
            border-left: 5px solid #0d6efd;
            padding: 15px;
            border-radius: 8px;
            font-size: 0.95rem;
        }

        ul {
            list-style: none;
            padding-left: 0;
        }

        ul li {
            margin-bottom: 10px;
        }
    </style>
</head>

<body>
    <div id="sugestao"></div>

    <div class="dashboard-container text-center">
        <h1 class="mb-4">Bem-vindo à Área Restrita</h1>
        <p class="mb-4">Escolha um tema para visitar:</p>

        <ul class="list-unstyled">
            <li><a class="btn btn-outline-primary w-100" href="/politica.html">Política</a></li>
            <li><a class="btn btn-outline-success w-100" href="/esportes.html">Esportes</a></li>
            <li><a class="btn btn-outline-warning w-100" href="/lazer.html">Lazer</a></li>
        </ul>

        <button class="btn btn-danger mt-3" onclick="logout()">Sair</button>
    </div>

    <script src="/track.js"></script>
    <script>
        const visitas = JSON.parse(getCookie("visitas") || "{}");
        const maisVisitado = Object.entries(visitas).sort((a, b) => b[1] - a[1])[0];

        if (maisVisitado) {
            document.getElementById("sugestao").innerHTML = `
        <strong><i class="bi bi-lightbulb-fill text-primary"></i> Sugestão:</strong><br>
        Você acessou muito sobre <em>${maisVisitado[0]}</em>! Que tal ver mais?
      `;
        }

        async function logout() {
            await fetch('/logout', { method: 'POST' });
            alert('Você saiu!');
            location.href = '/index.html';
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
        crossorigin="anonymous"></script>
</body>

</html>